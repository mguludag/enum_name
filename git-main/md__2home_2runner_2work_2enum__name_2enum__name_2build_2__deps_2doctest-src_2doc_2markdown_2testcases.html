<!-- HTML header for doxygen 1.10.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="generator" content="Doxygen 1.10.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>enum_name: Test cases</title>
    <link href="tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <script type="text/javascript" src="clipboard.js"></script>
    <script type="text/javascript" src="cookie.js"></script>
 <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <script
      type="text/javascript"
      src="version_selector_handler.js"
    ></script>
  </head>
  <body>
      <div id="top">
        <!-- do not remove this div, it is closed by doxygen! -->
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0">
            <tbody>
              <tr id="projectrow">
                <td id="projectalign">
                  <div id="projectname">
                    enum_name
                    <span id="projectnumber" />
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <!-- end header part -->
      </div>
    </div>
  </body>
</html>
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Test cases</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md170"></a> While <b>doctest</b> fully supports the traditional, xUnit, style of class-based fixtures containing test case methods this is not the preferred style. Instead <b>doctest</b> provides a powerful mechanism for nesting subcases within a test case. For a more detailed discussion and examples see the <a href="tutorial.md#test-cases-and-subcases"><b>tutorial</b></a>.</p>
<p>Test cases and subcases are very easy to use in practice:</p>
<ul>
<li><b>TEST_CASE(** <em>test name</em> **)</b></li>
<li><b>SUBCASE(** <em>subcase name</em> **)</b></li>
</ul>
<p><em>test name</em> and <em>subcase name</em> are free form, quoted, strings. Test names don't have to be unique within the <b>doctest</b> executable. They should also be string literals.</p>
<p>It is possible to write test cases inside of class bodies in C++17 with the help of <code>TEST_CASE_CLASS()</code> - used just like <code>TEST_CASE()</code> - making testing private parts of classes easier.</p>
<p>Keep in mind that even though <b>doctest</b> is <a href="faq.md#is-doctest-thread-aware"><b>thread-safe</b></a> - using subcases has to be done only in the main test runner thread.</p>
<p>Test cases can also be parameterized - see the <a class="el" href="md__2home_2runner_2work_2enum__name_2enum__name_2build_2__deps_2doctest-src_2doc_2markdown_2parameterized-tests.html"><b>documentation</b></a></p>
<p>Test cases and subcases can be filtered through the use of the <a class="el" href="md__2home_2runner_2work_2enum__name_2enum__name_2build_2__deps_2doctest-src_2doc_2markdown_2commandline.html"><b>command line</b></a></p>
<h1><a class="anchor" id="autotoc_md171"></a>
BDD-style test cases</h1>
<p>In addition to <b>doctest</b>'s take on the classic style of test cases, <b>doctest</b> supports an alternative syntax that allow tests to be written as "executable specifications" (one of the early goals of <a href="http://dannorth.net/introducing-bdd/">Behaviour Driven Development</a>). This set of macros map on to <code>TEST_CASE</code>s and <code>SUBCASE</code>s, with a little internal support to make them smoother to work with.</p>
<ul>
<li><b>SCENARIO(** <em>scenario name</em> **)</b></li>
</ul>
<p>This macro maps onto <code>TEST_CASE</code> and works in the same way, except that the test case name will be prefixed by "Scenario: "</p>
<ul>
<li><b>SCENARIO_TEMPLATE(** <em>scenario name</em>, <em>type</em>, <em>list of types</em> **)</b></li>
</ul>
<p>This macro maps onto <code>TEST_CASE_TEMPLATE</code> and works in the same way, except that the test case name will be prefixed by "Scenario: "</p>
<ul>
<li><b>SCENARIO_TEMPLATE_DEFINE(** <em>scenario name</em>, <em>type</em>, <em>id</em> **)</b></li>
</ul>
<p>This macro maps onto <code>TEST_CASE_TEMPLATE_DEFINE</code> and works in the same way, except that the test case name will be prefixed by "Scenario: "</p>
<ul>
<li><b>GIVEN(** <em>something</em> **)</b></li>
<li><b>WHEN(** <em>something</em> **)</b></li>
<li><b>THEN(** <em>something</em> **)</b></li>
</ul>
<p>These macros map onto <code>SUBCASE</code>s except that the subcase names are the _something_s prefixed by "given: ", "when: " or "then: " respectively.</p>
<ul>
<li><b>AND_WHEN(** <em>something</em> **)</b></li>
<li><b>AND_THEN(** <em>something</em> **)</b></li>
</ul>
<p>Similar to <code>WHEN</code> and <code>THEN</code> except that the prefixes start with "and ". These are used to chain <code>WHEN</code>s and <code>THEN</code>s together.</p>
<p>When any of these macros are used the console reporter recognises them and formats the test case header such that the Givens, Whens and Thens are aligned to aid readability.</p>
<p>Other than the additional prefixes and the formatting in the console reporter these macros behave exactly as <code>TEST_CASE</code>s and <code>SUBCASE</code>s. As such there is nothing enforcing the correct sequencing of these macros - that's up to the programmer!</p>
<p>Note that when using the <a href="https://github.com/doctest/doctest/blob/master/doc/markdown/commandline.md"><code>--test-case=&lt;filters&gt;</code></a> command line option (or <code>--subcase=&lt;filters&gt;</code>) you will have to pass the prefix <code>Scenario:</code> as well.</p>
<h1><a class="anchor" id="autotoc_md172"></a>
Test fixtures</h1>
<p>Although <b>doctest</b> allows you to group tests together as subcases within a test case, it can still be convenient, sometimes, to group them using a more traditional test fixture. <b>doctest</b> fully supports this too. You define the test fixture as a simple structure:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="keyword">class </span>UniqueTestsFixture {</div>
<div class="line"><span class="keyword">private</span>:</div>
<div class="line">    <span class="keyword">static</span> <span class="keywordtype">int</span> uniqueID;</div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">    DBConnection conn;</div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    UniqueTestsFixture() : conn(DBConnection::createConnection(<span class="stringliteral">&quot;myDB&quot;</span>)) {}</div>
<div class="line"><span class="keyword">protected</span>:</div>
<div class="line">    <span class="keywordtype">int</span> getID() {</div>
<div class="line">        <span class="keywordflow">return</span> ++uniqueID;</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> UniqueTestsFixture::uniqueID = 0;</div>
<div class="line"> </div>
<div class="line">TEST_CASE_FIXTURE(UniqueTestsFixture, <span class="stringliteral">&quot;Create Employee/No Name&quot;</span>) {</div>
<div class="line">    REQUIRE_THROWS(conn.executeSQL(<span class="stringliteral">&quot;INSERT INTO employee (id, name) VALUES (?, ?)&quot;</span>, getID(), <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line">}</div>
<div class="line">TEST_CASE_FIXTURE(UniqueTestsFixture, <span class="stringliteral">&quot;Create Employee/Normal&quot;</span>) {</div>
<div class="line">    REQUIRE(conn.executeSQL(<span class="stringliteral">&quot;INSERT INTO employee (id, name) VALUES (?, ?)&quot;</span>, getID(), <span class="stringliteral">&quot;Joe Bloggs&quot;</span>));</div>
<div class="line">}</div>
</div><!-- fragment --><p>The two test cases here will create uniquely-named derived classes of UniqueTestsFixture and thus can access the <code>getID()</code> protected method and <code>conn</code> member variables. This ensures that both the test cases are able to create a DBConnection using the same method (DRY principle) and that any ID's created are unique such that the order that tests are executed does not matter.</p>
<h1><a class="anchor" id="autotoc_md173"></a>
Test suites</h1>
<p>Test cases can be grouped into test suites. This is done with <code>TEST_SUITE()</code> or <code>TEST_SUITE_BEGIN()</code> / <code>TEST_SUITE_END()</code>.</p>
<p>For example:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line">TEST_CASE(<span class="stringliteral">&quot;&quot;</span>) {} <span class="comment">// not part of any test suite</span></div>
<div class="line"> </div>
<div class="line">TEST_SUITE(<span class="stringliteral">&quot;math&quot;</span>) {</div>
<div class="line">    TEST_CASE(<span class="stringliteral">&quot;&quot;</span>) {} <span class="comment">// part of the math test suite</span></div>
<div class="line">    TEST_CASE(<span class="stringliteral">&quot;&quot;</span>) {} <span class="comment">// part of the math test suite</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">TEST_SUITE_BEGIN(<span class="stringliteral">&quot;utils&quot;</span>);</div>
<div class="line"> </div>
<div class="line">TEST_CASE(<span class="stringliteral">&quot;&quot;</span>) {} <span class="comment">// part of the utils test suite</span></div>
<div class="line"> </div>
<div class="line">TEST_SUITE_END();</div>
<div class="line"> </div>
<div class="line">TEST_CASE(<span class="stringliteral">&quot;&quot;</span>) {} <span class="comment">// not part of any test suite</span></div>
</div><!-- fragment --><p>Then test cases from specific test suites can be executed with the help of filters - check out the <a class="el" href="md__2home_2runner_2work_2enum__name_2enum__name_2build_2__deps_2doctest-src_2doc_2markdown_2commandline.html"><b>command line</b></a></p>
<h1><a class="anchor" id="autotoc_md174"></a>
Decorators</h1>
<p>Test cases can be <em>decorated</em> with additional attributes like this:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line">TEST_CASE(<span class="stringliteral">&quot;name&quot;</span></div>
<div class="line">          * doctest::description(<span class="stringliteral">&quot;shouldn&#39;t take more than 500ms&quot;</span>)</div>
<div class="line">          * doctest::timeout(0.5)) {</div>
<div class="line">    <span class="comment">// asserts</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>Multiple decorators can be used at the same time. These are the currently supported decorators:</p>
<ul>
<li>**<code>skip(bool = true)</code>** - marks the test case to be skipped from execution - unless the <code>--no-skip</code> option is used</li>
<li>**<code>no_breaks(bool = true)</code>** - no breaking into the debugger for asserts in the test case - useful in combination with <code>may_fail</code>/<code>should_fail</code>/<code>expected_failures</code></li>
<li>**<code>no_output(bool = true)</code>** - no output from asserts in the test case - useful in combination with <code>may_fail</code>/<code>should_fail</code>/<code>expected_failures</code></li>
<li>**<code>may_fail(bool = true)</code>** - doesn't fail the test if any given assertion fails (but still reports it) - this can be useful to flag a work-in-progress, or a known issue that you don't want to immediately fix but still want to track in your tests</li>
<li>**<code>should_fail(bool = true)</code>** - like **<code>may_fail()</code>** but fails the test if it passes - this can be useful if you want to be notified of accidental, or third-party, fixes</li>
<li>**<code>expected_failures(int)</code>** - defines the number of assertions that are expected to fail within the test case - reported as failure when the number of failed assertions is different than the declared expected number of failures</li>
<li>**<code>timeout(double)</code>** - fails the test case if its execution exceeds this limit (in seconds) - but doesn't terminate it - that would require subprocess support</li>
<li>**<code>test_suite("name")</code>** - can be used on test cases to override (or just set) the test suite they are in</li>
<li>**<code>description("text")</code>** - a description of the test case</li>
</ul>
<p>The values that the decorators take are computed while registering the test cases (during global initialization) - before entering <code>main()</code> and not just before running them.</p>
<p>Decorators can also be applied to test suite blocks and all test cases in that block inherit them:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line">TEST_SUITE(<span class="stringliteral">&quot;some TS&quot;</span> * doctest::description(<span class="stringliteral">&quot;all tests will have this&quot;</span>)) {</div>
<div class="line">    TEST_CASE(<span class="stringliteral">&quot;has a description from the surrounding test suite&quot;</span>) {</div>
<div class="line">        <span class="comment">// asserts</span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line">TEST_SUITE(<span class="stringliteral">&quot;some TS&quot;</span>) {</div>
<div class="line">    TEST_CASE(<span class="stringliteral">&quot;no description even though in the same test suite as the one above&quot;</span>) {</div>
<div class="line">        <span class="comment">// asserts</span></div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Test cases can override the decorators that they inherit from their surrounding test suite:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line">TEST_SUITE(<span class="stringliteral">&quot;not longer than 500ms&quot;</span> * doctest::timeout(0.5)) {</div>
<div class="line">    TEST_CASE(<span class="stringliteral">&quot;500ms limit&quot;</span>) {</div>
<div class="line">        <span class="comment">// asserts</span></div>
<div class="line">    }</div>
<div class="line">    TEST_CASE(<span class="stringliteral">&quot;200ms limit&quot;</span> * doctest::timeout(0.2)) {</div>
<div class="line">        <span class="comment">// asserts</span></div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><hr  />
<ul>
<li>Check out the <a href="../../examples/all_features/subcases.cpp"><b>subcases and BDD example</b></a></li>
<li>Check out the <a href="../../examples/all_features/assertion_macros.cpp"><b>assertion macros example</b></a> to see how test suites are used</li>
<li>Tests are registered from top to bottom of each processed cpp after the headers have been preprocessed and included but there is no ordering between cpp files.</li>
</ul>
<hr  />
<p><a href="readme.md#reference">Home</a></p>
<p><img src="../../scripts/data/logo/icon_2.svg" alt="" style="pointer-events: none;" class="inline"/></p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
